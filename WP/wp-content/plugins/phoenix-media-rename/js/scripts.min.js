(function(e){var t,n,i,a,l,o=0;e.fn.do_rename=function(){var a=this;e.post(ajaxurl,{action:"phoenix_media_rename",type:i,_wpnonce:e("input[name=_mr_wp_nonce]",t).val(),new_filename:e("input",a).val(),post_id:e("input",a).data("post-id")},function(i){e(".loader",a).hide(),1!=i?e(".error",a).text(i).css("display","inline-block"):(e("input[type=text]",a).attr("title",e("input[type=text]",a).val()),e(".success",a).css("display","inline-block")),++o==l?(o=0,t.find(".error:visible").length||t.submit(),e("#doaction").prop("disabled",!1)):n.eq(o).do_rename()})},e(document).ready(function(){t=e("#post"),a=e(".wp_attachment_image").length,a||e(".tablenav select[name^=action]").each(function(){for(label in MRSettings.labels)e("option:last",this).before(e("<option>").attr("value",label).text(decodeURIComponent(MRSettings.labels[label].replace(/\+/g,"%20"))))}),e("#post").submit(s),e(".tablenav .button.action").click(s)});var s=function(){if(i=e(this).siblings("select").length?e(this).siblings("select").val():"rename",a||"rename"==i||"rename_retitle"==i||"rename_from_post_title"==i||"rename_retitle_from_post_title"==i)return e("#doaction").prop("disabled",!0),t=e("#posts-filter"),a?(t=e("#post"),n=e(".phoenix-media-rename",t),n=n.filter(function(){return e("input[type=text]",this).val()!=e("input[type=text]",this).attr("title")})):(t=e("#posts-filter"),n=e("#the-list input:checked",t).closest("tr").find(".phoenix-media-rename")),(l=n.length)?(n.find(".loader, .error, .success").hide(),n.find(".loader").css("display","inline-block"),n.eq(o).do_rename(),!1):void 0}})(jQuery);