var x=jQuery("#boats-lists").html(),dateFrom=$("#date_from").val();function run_waitMe(el,num,effect){switch(text="Please wait...",fontSize="",num){case 1:maxSize="",textPos="vertical";break;case 2:text="",maxSize=30,textPos="vertical";break;case 3:maxSize=30,textPos="horizontal",fontSize="18px"}el.waitMe({effect:"win8",text:text,bg:"rgba(255,255,255,0.8)",color:"#000",maxSize:maxSize,waitTime:-1,source:"",textPos:textPos,fontSize:fontSize,onClose:function(el){}})}function boatsearch(){if(null!=x){var minLength=parseInt($("#length-handle1").html().replace("ft / ","/").split("/")[0].trim()),maxLength=parseInt($("#length-handle2").html().replace("ft / ","/").split("/")[0].trim()),feauteres=[];$(".features.selected").each((function(){feauteres.push($(this).parent().attr("id"))})),minLength||(minLength=0),maxLength||(maxLength=0),minLength/=3.2808,maxLength/=3.2808;var cabinSelector=$(".cabin-selector"),cabins=[];cabinSelector.each((function(){$(this).prop("checked")&&cabins.push($(this).val())}));var minBerths=parseInt($("#berths-handle1").html().split("/")[0].trim()),maxBerths=parseInt($("#berths-handle2").html().split("/")[0].trim());minBerths||(minBerths=0),maxBerths||(maxBerths=0);var maxDistance=parseInt($("#distance-handle2").html().replace(" km","").trim());maxDistance||(maxDistance=0);var $categories=$(".category-selector"),allCategories=[],selectedCategories=[];$categories.each((function(){allCategories.push($(this).val()),1==$(this).prop("checked")&&selectedCategories.push($(this).val())})),0==selectedCategories.length&&(selectedCategories=allCategories);var $service_name=$(".service_name-selector"),allServiceNames=[],selectedServiceNames=[];$service_name.each((function(){if(allServiceNames.push($(this).val()),1==$(this).prop("checked"))selectedServiceNames.push($(this).val()),"Skipper"==$(this).val()&&selectedServiceNames.push("Sailor");else if("Skipper"==$(this).val()){var index=selectedServiceNames.indexOf("Sailor");index>-1&&selectedServiceNames.splice(index)}}));var $service_types=$(".service_types-selector"),selectedServiceTypes=0;$service_types.each((function(){1==$(this).prop("checked")&&(selectedServiceTypes=$(this).val())})),0==selectedServiceNames.length&&(selectedServiceNames=null);var $destinations=$("#oldalso").children("option"),selectedDestionations=[];$destinations.each((function(){1==$(this).prop("selected")&&selectedDestionations.push(parseInt($(this).val()))}));var date_from=$("#date_from").val(),duration=parseInt($("#duration").val()),flexibility=null!=date_from&&""!=date_from?$("#flexibility").val():null,desc=0,order_by=2,short_select;switch(parseInt($("#sort_select").val())){case 1:desc=0,order_by=2;break;case 2:desc=1,order_by=2;break;case 3:desc=0,order_by=3;break;case 4:desc=1,order_by=3;break;case 5:desc=0,order_by=6;break;case 6:desc=1,order_by=6;break;case 7:desc=0,order_by=7;break;case 8:desc=1,order_by=7;break;case 9:desc=0,order_by=4;break;case 10:desc=1,order_by=4;case 11:desc=0,order_by=5;break;case 12:desc=1,order_by=5}var models=$(".models").first().val(),have_skipper=0;$("#skipper-selector").prop("checked")&&(have_skipper=1);var is_sale=0;$("#is_sale").prop("checked")&&(is_sale=1);var ignoreOptions=0;$("#ignoreOptions").prop("checked")&&(ignoreOptions=1),dateFrom==date_from&&$.ajax({type:"POST",url:"/wp-content/plugins/boat-shortcodes/include/ajaxGetBoatList.php",data:{minLength:minLength,maxLength:maxLength,minBerth:minBerths,maxBerth:maxBerths,cabins:cabins,maxDistance:maxDistance,ignoreOptions:ignoreOptions,dest_ids:selectedDestionations,selectedCategories:selectedCategories,selectedServiceNames:selectedServiceNames,selectedServiceTypes:selectedServiceTypes,models:models,have_skipper:have_skipper,if_search:1,date_from:null!=date_from&&""!=date_from?date_from:null,duration:duration,flexibility:flexibility,feauteres:feauteres,is_sale:is_sale,order_by:order_by,desc:desc},beforeSend:function(){jQuery(".loader").addClass("waitMeTo_Container"),jQuery(".waitContainer").css({height:"50px"}),run_waitMe(jQuery(".waitContainer"),1,"progressBar")},success:function(data){$("#boats-lists").html(data),$("#oldalso").select2("close"),jQuery(".loader").removeClass("waitMeTo_Container"),jQuery(".waitContainer").css({height:"0px"}),$(".waitContainer").waitMe("hide"),load_info_bouble(),$(".fromto").each((function(){$(this).attr("attr-from")!==date_from&&$(this).addClass("flex")}))}})}}function boatsearchDateFrom(){var minLength=parseInt($("#length-handle1").html().replace("ft / ","/").split("/")[0].trim()),maxLength=parseInt($("#length-handle2").html().replace("ft / ","/").split("/")[0].trim()),feauteres=[];$(".features.selected").each((function(){feauteres.push($(this).parent().attr("id"))})),minLength||(minLength=0),maxLength||(maxLength=0),minLength/=3.2808,maxLength/=3.2808;var cabinSelector=$(".cabin-selector"),cabins=[];cabinSelector.each((function(){$(this).prop("checked")&&cabins.push($(this).val())}));var minBerths=parseInt($("#berths-handle1").html().split("/")[0].trim()),maxBerths=parseInt($("#berths-handle2").html().split("/")[0].trim());minBerths||(minBerths=0),maxBerths||(maxBerths=0);var maxDistance=parseInt($("#distance-handle2").html().replace(" km","").trim());maxDistance||(maxDistance=0);var $categories=$(".category-selector"),allCategories=[],selectedCategories=[];$categories.each((function(){allCategories.push($(this).val()),1==$(this).prop("checked")&&selectedCategories.push($(this).val())})),0==selectedCategories.length&&(selectedCategories=allCategories);var $service_name=$(".service_name-selector"),allServiceNames=[],selectedServiceNames=[];$service_name.each((function(){if(allServiceNames.push($(this).val()),1==$(this).prop("checked"))selectedServiceNames.push($(this).val()),"Skipper"==$(this).val()&&selectedServiceNames.push("Sailor");else if("Skipper"==$(this).val()){var index=selectedServiceNames.indexOf("Sailor");index>-1&&selectedServiceNames.splice(index)}}));var $service_types=$(".service_types-selector"),selectedServiceTypes=0;$service_types.each((function(){1==$(this).prop("checked")&&(selectedServiceTypes=$(this).val())})),0==selectedServiceNames.length&&(selectedServiceNames=null);var $destinations=$("#oldalso").children("option"),selectedDestionations=[];$destinations.each((function(){1==$(this).prop("selected")&&selectedDestionations.push(parseInt($(this).val()))}));var date_from=$("#date_from").val(),duration=parseInt($("#duration").val()),flexibility=null!=date_from&&""!=date_from?$("#flexibility").val():null,desc=0,order_by=2,short_select;switch(parseInt($("#sort_select").val())){case 1:desc=0,order_by=2;break;case 2:desc=1,order_by=2;break;case 3:desc=0,order_by=3;break;case 4:desc=1,order_by=3;break;case 5:desc=0,order_by=6;break;case 6:desc=1,order_by=6;break;case 7:desc=0,order_by=7;break;case 8:desc=1,order_by=7;break;case 9:desc=0,order_by=4;break;case 10:desc=1,order_by=4;case 11:desc=0,order_by=5;break;case 12:desc=1,order_by=5}var models=$(".models").first().val(),have_skipper=0,ignoreOptions=0;$("#skipper-selector").prop("checked")&&(have_skipper=1);var is_sale=0;$("#is_sale").prop("checked")&&(is_sale=1),$("#ignoreOptions").prop("checked")&&(ignoreOptions=1),dateFrom!=$("#date_from").val()&&null!=$("#date_from").val()&&""!=$("#date_from").val()&&($.ajax({type:"POST",url:"/wp-content/plugins/boat-shortcodes/include/ajaxGetBoatList.php",data:{minLength:minLength,maxLength:maxLength,minBerth:minBerths,maxBerth:maxBerths,cabins:cabins,maxDistance:maxDistance,dest_ids:selectedDestionations,selectedCategories:selectedCategories,selectedServiceNames:selectedServiceNames,selectedServiceTypes:selectedServiceTypes,models:models,have_skipper:have_skipper,if_search:1,date_from:null!=date_from&&""!=date_from?date_from:null,duration:duration,flexibility:flexibility,feauteres:feauteres,is_sale:is_sale,order_by:order_by,desc:desc,ignoreOptions:1},beforeSend:function(){jQuery(".loader").addClass("waitMeTo_Container"),jQuery(".waitContainer").css({height:"50px"}),run_waitMe(jQuery(".waitContainer"),1,"progressBar")},success:function(data){$("#boats-lists").html(data),$("#oldalso").select2("close"),jQuery(".loader").removeClass("waitMeTo_Container"),jQuery(".waitContainer").css({height:"0px"}),load_info_bouble(),$(".fromto").each((function(){$(this).attr("attr-from")!==date_from&&$(this).addClass("flex")}))}}).done((function(){$(".waitContainer").waitMe("hide")})),dateFrom=date_from)}function boatsearch_felso(){var categorie=$(".category-selector-felso").val(),allCategories=[],selectedCategories=[];selectedCategories.push(categorie),0==selectedCategories.length&&(selectedCategories=allCategories);var $destinations=$("#felso").children("option"),selectedDestionations=[];$destinations.each((function(){1==$(this).prop("selected")&&selectedDestionations.push($(this).val())}));var date_from=$("#date_from_felso").val(),duration=date_from&&""!=date_from?$("#duration_felso").val():null,flexibility=date_from&&""!=date_from?$("#flexibility_felso").val():null,myArrayQry1=selectedCategories.map((function(el,idx){return"&selectedCategories["+idx+"]="+el})),myArrayQry2=selectedDestionations.map((function(el,idx){return"selectedDestionations["+idx+"]="+el})).join("&");0==selectedDestionations.length&&(myArrayQry2="");var get=myArrayQry2+myArrayQry1+"&date_from="+encodeURI(date_from)+"&duration="+duration+"&flexibility="+encodeURI(flexibility);"&"==get.charAt(0)&&(get=get.substring(1)),window.open("/boat-search?"+get)}$(".boatsearch").on("click",(function(){boatsearch()})),$("#duration, .models, .service_name-selector, .service_types-selector").on("change",(function(){boatsearch()})),$("#flexibility").on("change",(function(){boatsearch()})),$(".category-selector, .skipper-selector, .cabins, #is_sale, #ignoreOptions").on("click",(function(){boatsearch()})),$("#berths-search, #length-search, #distance-search").on("mouseup",(function(){boatsearch()})),$(".features").on("click",(function(){$(this).hasClass("selected")?$(this).removeClass("selected"):$(this).addClass("selected"),boatsearch()})),$("#oldalso").on("change",(function(){boatsearch()})),$(".boatsearch-felso").on("click",(function(params){boatsearch_felso()})),$("#sort_select").on("change",(function(params){boatsearch()})),$("#date_from").on("dateselected",(function(){boatsearchDateFrom()}));